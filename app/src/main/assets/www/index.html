<head>
  <script src="file:///android_asset/www/plotly-latest.min.js"></script>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>

<body>
  <div id='dummy'>asdlfkj</div>
  <div id="plotlyDiv"></div>
  <script>
    var div2 = document.getElementById('dummy');
    div2.innerHTML = 'started';
    var data = {};
    fetch('http://localhost:8080')
    .then((resp) => resp.json())
	.then(function(resp)
	{
	  var div = document.getElementById('test');
	  for (i in resp)
	  {
		  var div = document.createElement('div');
		  div.id = 'plotly_' + i;
		  document.body.appendChild(div);
		  data[i] = {y: [resp[i]],
		   		  	 mode: 'lines',
					 type: 'scatter'
					};
		  Plotly.newPlot(div, [data[i]] , [], {displayModeBar: false});
	  }
	})
	.catch(err => {console.log(err)})

	setInterval(function(){

		fetch('http://localhost:8080/')
		.then((resp) => resp.json())
		.then(function(resp) {
		  var div = document.getElementById('test');

		  for (i in resp)
		  {
		    data[i].y.push(resp[i]);
			Plotly.extendTraces('plotly_' + i, {y: [[resp[i]]]}, [0]);
		  }
		})
	}, 1000);

  </script>
</body>